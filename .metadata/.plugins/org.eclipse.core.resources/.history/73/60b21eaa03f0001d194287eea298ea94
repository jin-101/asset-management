<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<c:set var="path" value="${pageContext.request.contextPath}"></c:set>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>장비조회관련 테이블 생성</title>
</head>
<body>
	<div id="change-List-contents">
		<table class="table table-hover" border="1">
			<thead>
				<tr class="table-list">
					<th class="col0">장비번호</th>
					<th class="col1">유형번호</th>
					<th class="col2">제조회사번호</th>
					<th class="col3">모델명</th>
					<th class="col4">시리얼번호</th>
					<th class="col5">구매일</th>
					<th class="col6">가격(만원)</th>
					<th class="col7 rentalType">변동</th>
				</tr>
			</thead>
			<tbody>
				<c:forEach items="${eqAll}" var="equipment" varStatus="status">
					<tr class="items">
						<th class="col0">${equipment.equipment_id}</th>
						<td class="col1">${equipment.equipment_typeId}</td>
						<td class="col2">${equipment.equipment_coId}</td>
						<td class="col3">${equipment.model}</td>
						<td class="col4">${equipment.serial_no}</td>
						<td class="col5">${equipment.purchase_date}</td>
						<td class="col6">${equipment.price}</td>
						<td class="col7">
							<button class="btn rentalType-btn">//</button>
						</td>
					</tr>
				</c:forEach>
			</tbody>
		</table>
	</div>
</body>
<script>
	$(function(){
		const PATH = getContextPath();
		
		$(".rentalType-btn").click(function() {
			const btnType = $(this).attr("data-btnType");
			const {ajaxPath, ajaxMethod} = btnTypeInfo[btnType];
			console.log(ajaxPath);
			//location.href="empDetail.do?empid=" + $(this).attr("data-id");
			$.ajax({
				url: PATH + "/equi/" + ajaxPath,
				method: ajaxMethod,
				data: makeData,
				success:(res)=>{
					$("#selector-search-content").html(res);
					$(".rentalType-btn").html(btnText).addClass(btnClass).attr("data-btnType",btnType);
				},
				error:(err)=>{
					console.log(err);
				}
			}); 
		});
	})
</script>
</html>