<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<c:set var="path" value="${pageContext.request.contextPath}"></c:set>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>장비조회관련 테이블 생성</title>
<style>
.modal{
	display:none;
}
.modal-bg{
	width:100%;
	height:100%;
	position:fixed;
	top:0;
	right:0;
	background:rgba(0,0,0,0.6);
	z-index:999;
}
.modal-content{
	position:absolute;
	top:50%;
	left:50%;
	transform:translate(-50%,-50%);
	width:40vw;
	height:40vh;
	border-radius:20px;
	background:white;
	z-index:1000;
	display:flex;
	justify-content: center;
	align-items: center;
}
.modal-label{
	display:block;
	margin: 20px 0;
}
.cancel-btn{
	position: absolute;
	right: 20px;
	top : 10px;
}
</style>
</head>
<body>
	<div id="change-List-contents">
		<table class="table table-hover" border="1">
			<thead>
				<tr class="table-list">
					<th class="col0">장비번호</th>
					<th class="col1">유형번호</th>
					<th class="col2">제조회사번호</th>
					<th class="col3">모델명</th>
					<th class="col4">시리얼번호</th>
					<th class="col5">구매일</th>
					<th class="col6">가격(만원)</th>
					<th class="col7 rentalType">변동</th>
				</tr>
			</thead>
			<tbody>
				<c:forEach items="${eqAll}" var="equipment" varStatus="status">
					<tr class="items">
						<th class="col0">${equipment.equipment_id}</th>
						<td class="col1">${equipment.equipment_typeId}</td>
						<td class="col2">${equipment.equipment_coId}</td>
						<td class="col3">${equipment.model}</td>
						<td class="col4">${equipment.serial_no}</td>
						<td class="col5">${equipment.purchase_date}</td>
						<td class="col6">${equipment.price}</td>
						<td class="col7">
							<button class="btn rentalType-btn" data-equipmentId=${equipment.equipment_id}></button>
						</td>
					</tr>
				</c:forEach>
			</tbody>
		</table>
	</div>
	<div class="modal">
		<div class="modal-bg"></div>
		<div class="modal-content">
			<div>
				<label class="modal-label">장비ID : <input type="text"> </label>
				<label class="modal-label">대여자 : 
					<select name="" id="rental-user">
						<option>선택하세요</option>
					   	<%-- <c:forEach items="${selectorlist}" var="item">
					   		<option>${item}</option>
					   	</c:forEach> --%>
					   	<option>김진범</option>
				    </select>
				</label>
			</div>
			<button class="btn btn-success">대여하기</button>
			<button class="cancel-btn btn btn-danger">종료</button>
		</div>
	</div>
	
</body>
<script>
	$(function(){
		const PATH = getContextPath();
		const btnTypeInfo = getBtnTypeInformation();
		
		$(".rentalType-btn").click(function() {
			e.stopPropagation();
			const btnType = $(this).attr("data-btnType");
			const {ajaxPath, ajaxMethod} = btnTypeInfo[btnType];
			console.log(ajaxPath);
			
			// 팝업띄우기
			
			$("html").css("overflow","hidden");
			$(".modal").css("display","block");
		});
		
		$(".cancel-btn").click(function() {
			$(".modal").css("display","none");
			$("html").css("overflow","auto");
		});
	})
</script>
</html>