<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<c:set var="path" value="${pageContext.request.contextPath}"></c:set> 
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
 <div>emp List</div>
 	<main>
        <div id="tables">
            <table class="table table-hover">
                <thead>
                    <tr class="list">
                    	<th class="col0">순번</th>
                        <th class="col1">직원번호</th>
                        <th class="col2">이름</th>
                        <th class="col3">성</th>
                        <th class="col4">이메일</th>
                        <th class="col5">전화번호</th>
                        <th class="col6">입사일</th>
                        <th class="col7">job번호</th>
                        <th class="col8">급여</th>
                        <th class="col9">세부부서 번호</th>
                        <th class="col10">직급 번호</th>
                    </tr>
                </thead>
                <tbody>
                	<c:forEach items="${empAll}" var="emp" varStatus="status">
                    <tr class="items">
                    	<th class="col0">${status.count}</th>
                        <td class="col1"><a href="${path}/emp/empDetail.do?empid=${emp.employee_id}">${emp.employee_id}</a></td>
                        <td class="col2"><a style="color : ${fn:length(emp.first_name)>5 ? 'red':'blue'};" href="${path}/emp/empDetail.do?empid=${emp.employee_id}">${emp.first_name}</a></td>
                        <td class="col3">${emp.last_name}</td>
                        <td class="col4">${emp.email} ---
                        	${fn:indexOf(emp.email,"@") !=-1 ? fn:substring(emp.email,0,fn:indexOf(emp.email,"@")) : emp.email}
                        </td>
                        <td class="col5">
                        	<fmt:formatNumber value="${emp.salary}" groupingUsed="true"></fmt:formatNumber>
                        </td>
                        <td class="totalSalary">${totalSalary}</td>
                        <td class="col6">
                        	<fmt:formatDate value="${emp.hire_date}" pattern="YYYY/MM/dd"/>
                        </td>
                        <td class="col7">${emp.phone_number}</td>
                        <td class="col8">${emp.job_id}</td>
                        <td class="col9">${emp.manager_id}</td>
                        <td class="col10"> ${emp.commission_pct} ,
                        	<fmt:formatNumber value="${emp.commission_pct}" type="percent"></fmt:formatNumber>
                        </td>
                        <td class="col11">${emp.department_id}</td>
                        <td><button class="col12 btnDel" data-del="${emp.employee_id}">삭제</button></td>
                    </tr>
                    </c:forEach>
                </tbody>
            </table>
        </div>
</main> 
</body>
</html>